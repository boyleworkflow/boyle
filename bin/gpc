#! /usr/bin/env python
"""
usage: gpc [-h|--help] <command> [<args>...]

The most commonly used gpc commands are:
   make       Make a target file

See 'gpc help <command>' for more information on a specific command.

"""
from subprocess import call
from os import path
from docopt import docopt

here = path.abspath(path.dirname(__file__))

if __name__ == '__main__':
    args = docopt(__doc__, options_first=True)
    argv = [args['<command>']] + args['<args>']
    if args['<command>'] in 'make'.split():
        exit(call(['python',
                   path.join(here, 'gpc_%s.py' % args['<command>'])] + argv))
    elif args['<command>'] in ['help']:
        if args['<args>']:
            exit(call(['gpc', args['<args>'][0], '--help']))
        else:
            exit(call(['gpc', '--help']))
    else:
        exit("%r is not a gpc command. See 'gpc help'." % args['<command>'])
